<div class="max-w-8xl mx-auto p-4">

  <!-- Encabezado -->
  <div class="bg-white rounded-xl shadow-md p-4 mb-4">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
      <div>
        <div class="flex items-center">
          <div class="bg-gray-200 border-2 border-dashed rounded-xl w-8 h-8 flex items-center justify-center">
            <fa-icon [icon]="['fas', getIconName('faTags')]" style="font-size: 15px;"></fa-icon>


          </div>
          <h1 class="text-2xl font-bold text-gray-800 ml-5 mt-2">Listado de Renglones Constructivos</h1>
        </div>
      </div>

    </div>
  </div>

  <app-super-group-utocomplete (seccionSelected)="onSeccionSelected($event)"
    (capituloSelected)="onCapituloSelected($event)"
    (subcapituloSelected)="onSubcapituloSelected($event)"></app-super-group-utocomplete>

  <div class="border border-gray-100 rounded-lg overflow-hidden">
    <mat-accordion>
      @for (item of paginatedRecursos; track $index) {
      <mat-expansion-panel>
        <mat-expansion-panel-header (click)="getDesgloseRenglon(item.codigo)">
          <mat-panel-title style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <div>
              {{ item.codigo }} {{item.Descripcion}}
            </div>
            <span class="text-left">{{item.total}} {{item.um}} </span>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costo
                  Material</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costo de MO
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costo de
                  Equipo</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Horas hombre
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Horas equipos
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cemento</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aridos</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Asfalto</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Carga</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Prefabricado
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Horas
                  operario</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Horas
                  ayudante</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costo Total
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Utilidad</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.material}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.mano}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.equipos}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Horashombre}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Horasequipos}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Cemento}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Aridos}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Asfalto}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Carga}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Prefabricado}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Horasoperario}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Horasayudante}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.total}}</td>
                <td class="px-4 py-4 text-sm font-medium text-gray-900">{{item.Utilidad}}</td>
              </tr>



            </tbody>
          </table>
        </div>

        @if (service.semiNorm()) {
        <h1 class="text-1xl font-medium text-gray-600 ml-5 mt-5 mb-2">Estructura del Renglón</h1>
        <app-semi-reng-norma [struct]="service.semiNorm()" />
        }

      </mat-expansion-panel>
      }
    </mat-accordion>
    @if (filteredRenglones.length > 0) {
    <mat-paginator [length]="filteredRenglones.length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
      [pageIndex]="pageIndex" (page)="handlePageEvent($event)" class="mt-4" aria-label="Seleccione página">
    </mat-paginator>
    }
  </div>


</div>